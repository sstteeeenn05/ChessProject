<html>

<head>
  <script defer type="module" src="PlayRoom.js"></script>
  <link rel="stylesheet" href="PlayRoomStyle.css">
  <title>Playing Chess</title>
</head>

<body>
  <div x-data="globalScope">
    <button class="leave-button">
      <img class="leave-button-image" src="./assets/chevron-left-solid.svg"
           alt="leave">
    </button>

    <div class="board">
      <template x-for="(line, row) in board" :key="row">
        <div class="row">
          <template x-for="(item, column) in line" :key="column">
            <div class="row-element"
                 :style="{background: previewClass[maskBoard[row*8+column]]}"
                 @click="click(column,row)">
              <img class="image" x-show="calculateUrl(item)"
                   :src="calculateUrl(item)" :alt="item"
                   x-transition:enter.duration.500ms x-transition:leave.duration.0s>
            </div>
          </template>
        </div>
      </template>
    </div>
    <h3 class="round-message" x-text="`Now Moving: ${nowMoving}'s turn`"></h3>
    <dialog class="lightbox" id="promotion"
            @cancel="(event)=>{event.preventDefault()}"
            x-show="isPromoting" x-transition>
      <h2>Promotion!!!</h2>
      <div class="select-div">
        <template x-for="(item, index) in calculatePromotionChess()" :key="index">
          <div class="promotion-container">
            <img class="promotion-image" :src="calculateUrl(item)"
                 :alt="item" @click="promotion(index)">
          </div>
        </template>
      </div>
    </dialog>
    <dialog class="lightbox" id="messageBox"
            @cancel="(event)=>{event.preventDefault()}"
            x-show="isMessage" x-transition>
      <h2 class="box-title" x-text="boxTitle"></h2>
      <p class="box-content" x-text="boxContext"></p>
      <button class="confirm-button" @click="closeMessage">OK</button>
    </dialog>
  </div>
</body>

</html>